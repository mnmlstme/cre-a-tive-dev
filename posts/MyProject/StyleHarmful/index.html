<!DOCTYPE html>
<html>
<head>
<title>`style` Considered Harmful</title>
<script type="importmap">
{ "imports": {"@cre.ative/kram-11ty/runtime":"/modules/@cre.ative/kram-11ty/runtime.mjs","@cre.ative/kram-11ty/styles":"/modules/@cre.ative/kram-11ty/styles.css"} }
</script>
<link rel="stylesheet" href="/modules/@cre.ative/kram-11ty/styles.css">
<script type="module">
import {init, register} from "@cre.ative/kram-11ty/runtime";
init({"btnText":"Button"});
import("./index.jsx")
          .then((mod) => register(mod, "undefined", "jsx", function(resource, container, initial) {
      if ( typeof (resource && resource.mount) === 'function' ) {
        return resource.mount(container, initial)
      }}))
import("./styles.css")
          .then((mod) => register(mod, "undefined", "css", function(resource, container, initial) {
      if ( typeof (resource && resource.mount) === 'function' ) {
        return resource.mount(container, initial)
      }}))
</script>
</head>
<body>
<kram-main>
<h1 slot="title">`style` Considered Harmful</h1>
<kram-toc slot="nav"><ol>
<li data-idref="scene-1">style Considered Harmful</li>
<li data-idref="scene-2">HTML style vs React style</li>
<li data-idref="scene-3">A Simple Example: Button</li>
<li data-idref="scene-4">Inline style on Button</li>
<li data-idref="scene-5">Revised Button in library</li>
<li data-idref="scene-6">But isnâ€™t className just as bad?</li>
<li data-idref="scene-7">Use CSS custom properties, not inline style</li>
<li data-idref="scene-8">Using CSS Variables with React</li>
</ol></kram-toc>
<kram-flow><kram-scene 
        scene="1" 
        language="jsx" 
        ><kram-code slot="scenecode" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span><span class="token plain-text">This is a Button</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><br>      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><br>        <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">"rebeccapurple"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">"0.5em dashed"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">"24px"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">fontFamily</span><span class="token operator">:</span> <span class="token string">"Impact"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token string">"2em auto"</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">}</span></span><br>    <span class="token punctuation">></span></span><span class="token plain-text"><br>      But so is this<br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre></kram-code><h1 slot="title"><code data-mark-around="`">style</code> Considered Harmful</h1>

<p>It&rsquo;s long been considered that using inline CSS (i.e., the&nbsp;<code data-mark-around="`">style</code>&nbsp;property) in HTML is poor practice. Here are just two discussion threads:</p>

<ul><li><p><a href="https://stackoverflow.com/questions/2612483/whats-so-bad-about-in-line-css">Stack Overflow: What&rsquo;s so bad about in-line CSS?</a></p>
</li>

<li><p><a href="https://www.quora.com/Is-it-really-a-bad-practice-to-use-inline-styles-in-HTML">Quora: Is it really a bad practice to use inline styles in HTML?</a></p>
</li>
</ul>

<p>What&rsquo;s less clear is whether it remains a poor practice in today&rsquo;s world of client-side rendering and CSS-in-JS. Do the arguments against using&nbsp;<code data-mark-around="`">style</code>&nbsp;still hold true for React components?</p>

<p>Most arguments against using inline CSS revolve around two observations:</p>

<ol><li><p>Inline CSS is not DRY (Don&rsquo;t Repeat Yourself).</p>
</li>

<li><p>Inline CSS mixes the separate concerns of presentation and content or interaction.</p>
</li>
</ol>

<p>With CSS-in-JS, issue #1 may no longer be an issue. Tools like&nbsp;<code data-mark-around="`">styled-components</code>&nbsp;allow you to define CSS classes and share them with other components. Inline styles are no longer needed.</p>

<p>Issue #2 is still a concern, even with CSS-in-JS. The JS for styling is usually kept in the same file as the content (HTML/JSX) or the interaction (also JS). If a developer wants to only change the styling of a component, they usually have to go to the component&rsquo;s JSX and find the relevant style declarations. This, like inline CSS, mixes the concerns of presentation and content/interaction.</p>

<p>That&rsquo;s not to say it isn&rsquo;t possible to keep the concerns separate using CSS-in-JS. But it takes more discipline. Imagine a system where all style declarations are maintained in separate&nbsp;<code data-mark-around="`">*.css.js</code>&nbsp;files, which&nbsp;<code data-mark-around="`">export</code>&nbsp;JS constants for all the &ldquo;classes&rdquo;. At this point, however, one may as well write straight CSS and use&nbsp;<a href="https://www.npmjs.com/package/postcss-modules">postcss-modules</a>&nbsp;to enable the classes to be&nbsp;<code data-mark-around="`">import</code>ed as JS.</p>
</kram-scene>
<kram-scene 
        scene="2" 
        language="jsx" 
        ><kram-code slot="scenecode" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V1.Button</span></span><br>      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><br>        <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">"rebeccapurple"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">"4px dashed"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token string">"1em"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">"24px"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"2em"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token string">"2em auto"</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">}</span></span><br>    <span class="token punctuation">></span></span><span class="token plain-text"><br>      This used to work in Version 1<br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V1.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V2.Button</span></span><br>      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><br>        <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">"rebeccapurple"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">"4px dashed"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token string">"1em"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">"white"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">"24px"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">"2em"</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token string">"2em auto"</span><span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">}</span></span><br>    <span class="token punctuation">></span></span><span class="token plain-text"><br>      But I upgraded to Version 2 and now I get this<br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V2.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre></kram-code><h2>HTML <code data-mark-around="`">style</code> vs React <code data-mark-around="`">style</code></h2>

<p>What is the difference between the&nbsp;<code data-mark-around="`">style</code>&nbsp;attribute in HTML and defining a React component to accept a&nbsp;<code data-mark-around="`">style</code>&nbsp;property? In HTML, the impact of every possible value of the&nbsp;<code data-mark-around="`">style</code>&nbsp;property is documented and standardized. Standards change slowly, and such changes are always backward-compatible. So if an app developer adds a&nbsp;<code data-mark-around="`">style</code>&nbsp;to an HTML element, they can be sure it will continue to do the same thing for a long time. As long as they don&rsquo;t change something else in the application code, the presentation will never change.</p>

<p>But the same cannot be said of a&nbsp;<code data-mark-around="`">style</code>&nbsp;property on a React component. This is because the impact of the&nbsp;<code data-mark-around="`">style</code>&nbsp;on the component is not documented and no guarantee can be made that it will have the same effect in future versions of the component. As a result, if an app developer adds a&nbsp;<code data-mark-around="`">style</code>&nbsp;to a React element, they cannot be sure this code will continue to work in the future. Any time the React component (which is in a library they don&rsquo;t control) changes, there is the possibility the presentation will change,&nbsp;<em data-mark-around="*">even if they never change the application code</em>.</p>
</kram-scene>
<kram-scene 
        scene="3" 
        language="jsx" 
        ><kram-code slot="scenecode" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  Here is our original </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V1.Button</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V1.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text">.<br></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre></kram-code><h2>A Simple Example: <code data-mark-around="`">Button</code></h2>

<p>To show just how likely this is to happen, let&rsquo;s take at a simple implementation of a button, apply a&nbsp;<code data-mark-around="`">style</code>&nbsp;inline, and then look at other ways&nbsp;<code data-mark-around="`">&lt;Button&gt;</code>&nbsp;could be defined that would change the way the&nbsp;<code data-mark-around="`">style</code>&nbsp;property impacts the presentation.</p>

<p>Here is the original <code data-mark-around="`">&lt;Button&gt;</code> code:</p>

<kram-code data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">UnstyledButton</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>  <span class="token comment">// NOTE: NOT recommended to pass `style` prop</span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>args<span class="token punctuation">.</span>className<span class="token punctuation">}</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>args<span class="token punctuation">.</span>style<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token punctuation">{</span>args<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token constant">V1</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token function-variable function">Button</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UnstyledButton</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>css<span class="token punctuation">.</span>button_v1<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>args<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>      </span><span class="token punctuation">{</span>args<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UnstyledButton</span></span><span class="token punctuation">></span></span><br>  <span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></kram-code>
<kram-code data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.button_v1</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px<span class="token punctuation">;</span><br>  <span class="token property">line-height</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span><br>  <span class="token property">background</span><span class="token punctuation">:</span> #f0f0f0<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid<span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></kram-code></kram-scene>
<kram-scene 
        scene="4" 
        language="jsx" 
        ><kram-code slot="scenecode" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  Here is our original </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V1.Button</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V1.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"> and<br>  inline-modified</span><span class="token punctuation">{</span><span class="token string">" "</span><span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V1.Button</span></span><br>    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><br>      <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">"4px solid red"</span><span class="token punctuation">,</span><br>      <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">"0 14px"</span><span class="token punctuation">,</span><br>      <span class="token literal-property property">lineHeight</span><span class="token operator">:</span> <span class="token string">"18px"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">}</span></span><br>  <span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V1.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>  .<br></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre></kram-code><h2>Inline <code data-mark-around="`">style</code> on <code data-mark-around="`">Button</code></h2>

<p>Now let&rsquo;s try adding an inline style. Let&rsquo;s say we want the outline to be 4px thick, but we don&rsquo;t want the overall size of the button to change.</p>

<p>Inspecting the CSS, we see that the padding is currently&nbsp;<code data-mark-around="`">0</code>&nbsp;vertically and&nbsp;<code data-mark-around="`">16px</code>&nbsp;horizontally.
We can&rsquo;t subtract the extra&nbsp;<code data-mark-around="`">2px</code>&nbsp;from&nbsp;<code data-mark-around="`">0</code>, so we also need to change&nbsp;<code data-mark-around="`">line-height</code>&nbsp;from&nbsp;<code data-mark-around="`">22px</code>&nbsp;to&nbsp;<code data-mark-around="`">18px</code>.We will also make the border red.</p>
</kram-scene>
<kram-scene 
        scene="5" 
        language="jsx" 
        ><kram-code slot="scenecode" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  Here is our updated </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V2.Button</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V2.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"> and<br>  modified</span><span class="token punctuation">{</span><span class="token string">" "</span><span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V2.Button</span></span><br>    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><br>      <span class="token literal-property property">border</span><span class="token operator">:</span> <span class="token string">"4px solid red"</span><span class="token punctuation">,</span><br>      <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">"0 14px"</span><span class="token punctuation">,</span><br>      <span class="token literal-property property">lineHeight</span><span class="token operator">:</span> <span class="token string">"18px"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">}</span></span><br>  <span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V2.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>  .<br></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre></kram-code><h2>Revised <code data-mark-around="`">Button</code> in library</h2>

<p>Now let&rsquo;s say the&nbsp;<code data-mark-around="`">Button</code>&nbsp;component is reimplemented. To simplify the calculations for padding, the library maintainers have decided to use generated content (the&nbsp;<code data-mark-around="`">::before</code>&nbsp;pseudo-element) to place the border on top of the button so it does not interact with the padding.</p>

<p>Here is the updated CSS for Button:</p>

<kram-code data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token constant">V2</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token function-variable function">Button</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UnstyledButton</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>css<span class="token punctuation">.</span>button_v2<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>args<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>      </span><span class="token punctuation">{</span>args<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UnstyledButton</span></span><span class="token punctuation">></span></span><br>  <span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></kram-code>
<kram-code data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">.button_v2</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 4px 16px<span class="token punctuation">;</span><br>  <span class="token property">line-height</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">z-index</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token comment">/* create stacking context */</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.button_v2::before</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><br>  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">background</span><span class="token punctuation">:</span> #f0f0f0<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid<span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span><br>  <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span> <span class="token comment">/* behind the content of the button */</span><br><span class="token punctuation">}</span></code></pre></kram-code>
<p>As a result, there is no visible change to the Button in the library version, but the modified version now has two borders: the outer red one from the override, as well as the inner black one from the updated library.</p>

<p>Notice that the application code did not change, other than the reference to the newer version of the library. So the issue may not be found by the QA team which is focusing on new or modified parts of the application. And when the problem is eventually discovered, the application developers will suspect the bug is in the library, since nothing changed in their code.</p>

<p>This is how opening up the <code data-mark-around="`">style</code> property can lead to unexpected results in application code, and maintenance effort for the library team.</p>
</kram-scene>
<kram-scene 
        scene="6" 
        language="null" 
        norender><h2>But isn&rsquo;t <code data-mark-around="`">className</code> just as bad?</h2>

<p>Similar problems can arise when using <code data-mark-around="`">className</code> to override the styling of a component. The main reason why this is not as worrisome is that to override <code data-mark-around="`">className</code>, application developers need to create a CSS class. Whether they do it using a CSS file, <code data-mark-around="`">styled-components</code>, <code data-mark-around="`">tailwind</code>, etc, the CSS is part of a class or component <em data-mark-around="_">definition</em>, not a component <em data-mark-around="_">instance</em>.</p>

<p>There are also legitimate uses of <code data-mark-around="`">className</code> that cannot be distinguished from the problematic ones. Some common cases are</p>

<ul><li><p>Building up composites, where a component&rsquo;s role in the composite is specified by applying a class, e.g. <code data-mark-around="`">modal-header</code></p>
</li>

<li><p>Laying out components within a grid or flex container</p>
</li>

<li><p>Applying CSS animations to components</p>
</li>
</ul>
</kram-scene>
<kram-scene 
        scene="7" 
        language="jsx" 
        ><kram-code slot="scenecode" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  Here is our updated </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V3.Button</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V3.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"> and<br>  modified</span><span class="token punctuation">{</span><span class="token string">" "</span><span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V3.Button</span></span><br>    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><br>      <span class="token comment">// Here we only set custom properties</span><br>      <span class="token string-property property">"--button-border-thickness"</span><span class="token operator">:</span> <span class="token string">"4px"</span><span class="token punctuation">,</span><br>      <span class="token string-property property">"--button-border-color"</span><span class="token operator">:</span> <span class="token string">"red"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">}</span></span><br>  <span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V3.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>  .<br></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre></kram-code><h2>Use CSS custom properties, not inline <code data-mark-around="`">style</code></h2>

<p>Depending on the component, there may be some CSS properties that need to be modified by the consuming application. This often happens when the application wants to control the placement or layout of a component.</p>

<p>Inline styles can also be useful for allowing parameterized styles, where the component&rsquo;s CSS references CSS custom properties (also known as CSS variables). <code data-mark-around="`">styled-components</code> uses this approach to do dynamic styling.</p>

<p>It is tempting to say that since there are legitimate use cases for setting CSS properties inline, we need to allow consuming applications to set <code data-mark-around="`">style</code>. In fact, in HTML, that is the only way to code these use cases. But luckily, React gives us other options.</p>

<p>First, let&rsquo;s look at solutions that are CSS-only. Can a CSS class indicate which properties can be set on individual elements? Although there is no public/private access control in CSS, CSS custom properties are one mechanism which CSS provides for defining an interface to a class. Calling these CSS variables reminds us that they can change, often on a per-instance basis.</p>

<p>Since the common practice is to define CSS variables and then compute standard CSS properties from the custom ones, it is reasonably safe to override CSS variables.</p>

<p>Let&rsquo;s go back to the <code data-mark-around="`">Button</code> example, and see how we might use CSS variables to make a forward-compatible interface that allows modifying the thickness and color of the border. For now, let&rsquo;s work in CSS only, and not modify the React component. We will still need to set the <code data-mark-around="`">style</code> property, but only for setting CSS variables.</p>

<kram-code data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token constant">V3</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token function-variable function">Button</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UnstyledButton</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>css<span class="token punctuation">.</span>button_v3<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>args<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>      </span><span class="token punctuation">{</span>args<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UnstyledButton</span></span><span class="token punctuation">></span></span><br>  <span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></kram-code>
<kram-code data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">--button-border-thickness</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><br>  <span class="token property">--button-border-color</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.button_v3</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 4px 16px<span class="token punctuation">;</span><br>  <span class="token property">line-height</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.button_v3::after</span> <span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span><br>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span><br>  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span><br>  <span class="token property">border-width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--button-border-thickness<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--button-border-color<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre></kram-code>
<p>Note that the intent of the application code is also much clearer, and doesn&rsquo;t need to reference <code data-mark-around="`">padding</code> or <code data-mark-around="`">line-height</code>.</p>

<p>Another advantage is that CSS variables are inherited. Since the variables are declared in <code data-mark-around="`">:root</code>, their values can be modified at any level of the DOM. So if we apply the <code data-mark-around="`">style</code> to the <code data-mark-around="`">p</code>, every button inside would be affected.</p>
</kram-scene>
<kram-scene 
        scene="8" 
        language="jsx" 
        ><kram-code slot="scenecode" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"><br>  Here is our standard </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V4.Button</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V4.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"> and<br>  customized</span><span class="token punctuation">{</span><span class="token string">" "</span><span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">V4.Button</span></span><br>    <span class="token attr-name">customize</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><br>      <span class="token string-property property">"border-thickness"</span><span class="token operator">:</span> <span class="token string">"4px"</span><span class="token punctuation">,</span><br>      <span class="token string-property property">"border-color"</span><span class="token operator">:</span> <span class="token string">"red"</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">}</span></span><br>  <span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token punctuation">{</span>btnText<span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">V4.Button</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>  .<br></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre></kram-code><h2>Using CSS Variables with React</h2>

<p>While CSS variables give us a way to allow safe modification of component properties, we still need to pass them through the <code data-mark-around="`">style</code> property, which allows all CSS properties to be modified. While we could filter the <code data-mark-around="`">style</code> prop before passing it down, this might be confusing to app developers.</p>

<p>We could add properties to <code data-mark-around="`">Button</code> for every CSS variable which we introduce in the definition. These properties would also be type-checked. However, this could potentially be a large number of properties which could conflict with the names of other properties. It would also be difficult to maintain such a wide interface.</p>

<p>Alternatively, we will pass all the customizations as one property, which we&rsquo;ll call <code data-mark-around="`">customize</code>. This has some distinct advantages:</p>

<ul><li><p>In application code, it is very clear where customization is occurring because all components will use the same property name <code data-mark-around="`">customize</code> for this purpose.</p>
</li>

<li><p>We can write a generic function to convert the <code data-mark-around="`">customize</code> property to a <code data-mark-around="`">style</code> property.</p>
</li>

<li><p>Type-checking is possible, but not required. The <code data-mark-around="`">customize</code> property can be declared as <code data-mark-around="`">any</code>.</p>
</li>

<li><p>App developers can discover customization points by inspecting the CSS and looking for the <code data-mark-around="`">var</code> references.</p>
</li>

<li><p>New customization points are easy to add by modifiyng only the CSS.</p>
</li>
</ul>

<p>Here is an example of a <code data-mark-around="`">Button</code> component that provides customization points for the border color and thickness:</p>

<kram-code data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token function-variable function">customizeStyle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">comp<span class="token punctuation">,</span> params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span><br>  Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><br>    Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>prop<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">[</span><br>      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">--</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>comp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>prop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>      value<span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">)</span><br>  <span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">CustomButton</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">args <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><br>    <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>args<span class="token punctuation">.</span>className<span class="token punctuation">}</span></span><br>    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">customizeStyle</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span>customize<span class="token punctuation">)</span><span class="token punctuation">}</span></span><br>  <span class="token punctuation">></span></span><span class="token plain-text"><br>    </span><span class="token punctuation">{</span>args<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token plain-text"><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token constant">V4</span> <span class="token operator">=</span> <span class="token punctuation">{</span><br>  <span class="token function-variable function">Button</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">args</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CustomButton</span></span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>css<span class="token punctuation">.</span>button_v3<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>args<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br>      </span><span class="token punctuation">{</span>args<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token plain-text"><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CustomButton</span></span><span class="token punctuation">></span></span><br>  <span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></kram-code>
<h2>Conclusion</h2>

<p>Setting an inline <code data-mark-around="`">style</code> on a component can lead to unexpected results and increases the cost of support for a component library. Even in plain HTML, the practice is frowned upon, but until recently there were no good alternatives. CSS custom properties (or &rdquo;variables&rdquo;) have rapidly become a best practice to abstract out of a CSS definition those properties that are expected to be variable. We can leverage CSS variables to provide a stable method of allowing for a wide range of customizations with minimal overhead for library maintainers. For extra safety, type-checking can be added later, once all the required customizations have been determined.</p>
</kram-scene></kram-flow>
</kram-main>
</body>
</html>
